# LitRes Book Downloader

```
██╗     ██╗████████╗██████╗ ███████╗██████╗ ███████╗
██║     ██║╚══██╔══╝██╔══██╗██╔════╝██╔══██╗██╔════╝
██║     ██║   ██║   ██████╔╝█████╗  ██████╔╝███████╗
██║     ██║   ██║   ██╔═══╝ ██╔══╝  ██╔══██╗╚════██║
███████╗██║   ██║   ██║     ███████╗██║  ██║███████║
╚══════╝╚═╝   ╚═╝   ╚═╝     ╚══════╝╚═╝  ╚═╝╚══════╝
```

**Консольное приложение для загрузки книг с сайта LitRes.ru по подписке.**

Это приложение позволяет обходить ограничения на копирование для книг, доступных по подписке, загружая их страницы в виде изображений и автоматически собирая в один оптимизированный PDF-файл.

## Основные возможности

-   **Обход защиты**: Позволяет сохранять книги, которые доступны только для чтения в браузере.
-   **Многопоточная загрузка**: Значительно ускоряет процесс скачивания страниц.
-   **Оптимизация PDF**: Создает PDF-файлы с настраиваемым качеством (DPI и сжатие), чтобы найти баланс между размером и качеством.
-   **Гибкая настройка**: Все ключевые параметры, такие как директории для сохранения, качество изображений и сетевые настройки, можно изменить в файле `config.ini`.
-   **Автоматическая аутентификация**: Приложение использует `selenium` для автоматизации входа в аккаунт LitRes через браузер Chrome и сохраняет сессию для последующих запусков.

## Установка и запуск

1.  **Клонируйте репозиторий**:
    ```bash
    git clone <URL_вашего_репозитория>
    cd litres-pdf
    ```

2.  **Создайте и активируйте виртуальное окружение**:
    -   **Windows**:
        ```bash
        python -m venv .venv
        .venv\Scripts\activate
        ```
    -   **macOS / Linux**:
        ```bash
        python -m venv .venv
        source .venv/bin/activate
        ```

3.  **Установите зависимости**:
    ```bash
    pip install -r requirements.txt
    ```

4.  **Запустите приложение**:
    ```bash
    python main.py
    ```

## Использование

-   **Первый запуск**: При первом запуске откроется окно браузера Chrome. Войдите в свой аккаунт на сайте LitRes. После успешного входа ваша сессия будет сохранена в `cookies.json`, и в будущем браузер открываться не будет.
-   **Загрузка книг**: После успешной аутентификации вставьте в консоль URL книги, которую хотите скачать, и нажмите Enter.
-   **Выход**: Чтобы завершить работу, просто нажмите Enter, не вводя URL.

## Конфигурация

Вы можете настроить работу приложения, изменив параметры в файле `config.ini`:

-   `image_dir`: Директория для сохранения временных изображений страниц.
-   `pdf_dir`: Директория для сохранения готовых PDF-файлов.
-   `quality`: Качество сжатия изображений в PDF (от 1 до 100).
-   `dpi`: Разрешение изображений в PDF. Меньшее значение уменьшит размер файла, но может ухудшить качество.
-   `max_workers`: Количество одновременных потоков для загрузки страниц.

## Тестирование

Проект покрыт unit-тестами для обеспечения стабильности. Чтобы запустить тесты, выполните команду:

```bash
python -m pytest
``` 